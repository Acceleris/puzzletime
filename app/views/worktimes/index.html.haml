.worktimes{'data-selected-date' => @selected_date}
  .figures
    .balance
      Überzeitsaldo:
      = format_hour(@current_overtime)
    .monthly
      Monatliche Arbeitszeit:
      = monthly_worktime
    .holidays
      Feriensaldo: TODO

  .weeknav-container
    .weeknav
      = link_to(worktimes_url(week_date: @previous_week_date),
                {class: 'weeknav-link previous', title: 'Vorherige Woche'}) do
        = icon('chevron-left')

      %ul.weeknav-days
        = render partial: 'overview_day', collection: @week_days, as: :day
      .weeknav-calendar-row
        = hidden_field_tag('week_date', I18n.l(@selected_date), class: 'date')
        = icon(:calendar)
        = I18n.l(@selected_date)
      .weeknav-add-row
        = link_to(new_projecttime_path(work_date: I18n.l(@selected_date)),
                  {class: 'btn btn-primary', title: 'Zeit/Abwesenheit erfassen'}) do
          = icon(:plus)
          %span.add-text
            Hinzufügen
      .weeknav-total.weeknav-element
        .inner
          .weeknav-label Total
          .weeknav-time= format_hour(sum_total_worktimes(@worktimes))

      = link_to(worktimes_url(week_date: @next_week_date),
                {class: 'weeknav-link next', title: 'Nächste Woche'}) do
        = icon('chevron-right')

  .weekcontent
    - if @worktimes.present?
      = render partial: 'list', collection: @week_days, as: :day
    - else
      %p
        In dieser Woche wurden noch keine Zeiten erfasst

%p.actions
  - if @user.management
    = link_to 'Fremderfassen', new_projecttime_path(other: 1)

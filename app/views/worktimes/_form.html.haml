- submit ||= ['Speichern']
- auto_start_stop_type ||= false
= render 'shared/error_messages', object: @worktime

%table
  - if record_other?
    %tr
      %td Mitarbeiter:
      %td
        = collection_select(:worktime,
                            :employee_id,
                            Employee.list,
                            :id,
                            :label_verbose,
                            data: { remote: true,
                                    url: url_for(action: 'existing'),
                                    dynamic_params: 'worktime[work_date]' })
  %tr
    %td Reporttyp:
    %td
      = select_report_type auto_start_stop_type
  %tr
    %td= @worktime.class.account_label
    %td
      - if @worktime.absence?
        %select#worktime_account_id{:name => "worktime[account_id]"}
          = account_options
      - else
        = text_field('worktime',
                     'account',
                     value: @worktime.account.label_verbose,
                     data: { autocomplete: 'project',
                             url: search_projects_path,
                             id_field: 'worktime_account_id' })
        = hidden_field('worktime', 'account_id')

  %tr
    %td Datum:
    %td
      = date_calendar_field 'worktime',
                            'work_date',
                            data: { remote: true,
                                    url: url_for(action: 'existing'),
                                    dynamic_params: 'worktime[employee_id]' }
  %tr
    %td Stunden:
    %td= text_field('worktime', 'hours', :disabled => true, :size => '15')
  %tr
    %td Von:
    %td
      = text_field 'worktime', 'from_start_time', :size => '15', :value => format_time(@worktime.from_start_time)
  %tr
    %td Bis:
    %td
      = text_field 'worktime', 'to_end_time', :size => '15', :value => format_time(@worktime.to_end_time)

  %tr
    %td Ticket/Task:
    %td
      = text_field 'worktime', 'ticket', :size => '15'
  - if @worktime.has_column? :description
    %tr{:valign => "top"}
      %td Beschreibung:
      %td= text_area 'worktime', 'description', {:rows => 5}
  - if @worktime.has_column? :billable
    %tr
      %td Verrechenbar:
      %td= check_box 'worktime', 'billable'
  - if @user.management && @worktime.has_column?(:booked) && ! @worktime.new_record?
    %tr
      %td Verbucht:
      %td= check_box 'worktime', 'booked'
  %tr
    %td
    %td
      - for label in submit
        = submit_tag label

- content_for :javascript do
  $(function() {
  App.switchTimeFieldsVisibility();
  })

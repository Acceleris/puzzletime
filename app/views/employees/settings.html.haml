- @title = "Benutzereinstellungen"
= render 'shared/error_messages', object:  @user
= form_tag settings_employees_path do
  %table
    %tr
      %td Default Report Typ:
      %td
        = select 'user', 'report_type', ReportType::INSTANCES.collect {|type| [type.name, type.key]}, {:selected => @user.report_type ? @user.report_type.key : nil} |
    %tr
      %td Default Projekt:
      %td
        = select 'user', 'default_project_id', @user.leaf_projects.sort.collect{|project| [project.label_verbose, project.id]}, {:selected => @user.default_project_id}                                           |
    %tr
      %td Anwesenheitszeiten:
      %td
        = check_box 'user', 'default_attendance'
        standardmässig erfassen
    %tr
      %td{:colspan => "2"}
        %br>/
        Angezeigte aktuelle Zeitspannen:
    %tr{:valign => "top"}
      %td &nbsp; Eigene Zeit
      %td
        %table{:cellpadding => "0", :cellspacing => "0"}
          %tr{:valign => "top"}
            %td
              = multiple_check_box 'user', 'user_periods', '0d'
              Heute
              %br/
              = multiple_check_box 'user', 'user_periods', '-1d'
              Gestern
            %td
              = multiple_check_box 'user', 'user_periods', '0w'
              Aktuelle Woche
              %br/
              = multiple_check_box 'user', 'user_periods', '-1w'
              Vorige Woche
            %td
              = multiple_check_box 'user', 'user_periods', '0m'
              Aktueller Monat
              %br/
              = multiple_check_box 'user', 'user_periods', '-1m'
              Voriger Monat
            %td
              = multiple_check_box 'user', 'user_periods', '0y'
              Aktuelles Jahr
              %br/
              = multiple_check_box 'user', 'user_periods', '-1y'
              Voriges Jahr
            %td
              = multiple_check_box 'user', 'user_periods', '0'
              Total
    %tr{:valign => "top"}
      %td &nbsp; Auswertungen
      %td
        %table{:cellpadding => "0", :cellspacing => "0"}
          %tr{:valign => "top"}
            %td
              = multiple_check_box 'user', 'eval_periods', '0d'
              Heute
              %br/
              = multiple_check_box 'user', 'eval_periods', '-1d'
              Gestern
            %td
              = multiple_check_box 'user', 'eval_periods', '0w'
              Aktuelle Woche
              %br/
              = multiple_check_box 'user', 'eval_periods', '-1w'
              Vorige Woche
            %td
              = multiple_check_box 'user', 'eval_periods', '0m'
              Aktueller Monat
              %br/
              = multiple_check_box 'user', 'eval_periods', '-1m'
              Voriger Monat
            %td
              = multiple_check_box 'user', 'eval_periods', '0y'
              Aktuelles Jahr
              %br/
              = multiple_check_box 'user', 'eval_periods', '-1y'
              Voriges Jahr
            %td
              = multiple_check_box 'user', 'eval_periods', '0'
              Total
    %tr
      %td
      %td= submit_tag 'Speichern'
%br/
%br/
%h2 Benutzerinformationen
%div{:style => "float:left;"}
  %b Anstellungen
  %table.striped{:style => "margin-right: 50px;"}
    %thead
      %tr
        %th Von
        %th Bis
        %th Prozent
    %tbody
      - @user.employments.each do |employment|
        %tr
          %td{:align => "right"}= format_date employment.start_date
          %td{:align => "right"}= format_date employment.end_date
          %td{:align => "right"}= format_percent employment.percent
- unless @user.overtime_vacations.empty?
  %div
    %b Überzeit-Ferien Umbuchungen
    %table
      %thead
        %tr
          %th Datum
          %th Stunden
      %tbody
        - @user.overtime_vacations.each do |transfer|
          %tr
            %td{:align => "right"}= format_date transfer.transfer_date
            %td{:align => "right"}
              = format_hour transfer.hours
              h
